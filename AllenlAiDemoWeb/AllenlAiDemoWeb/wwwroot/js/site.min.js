function getThumbnail(){var f=heightInput.value,e=widthInput.value,t,i,r,u,n;fromUrl?(r=urlInput.value.toString(),u={url:r},t=JSON.stringify(u),i="application/json"):(t=imageUpload.files[0],i="application/octet-stream");try{n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){if(end=(new Date).getTime(),n.status===200){urlInput.value="";heightInput.value="";widthInput.value="";var t=n.getResponseHeader("Content-Type"),i=binaryToBase64(n.response);$("#thumbnailImage").attr("src","data:"+t+";base64,"+i)}updateResult(n,end-start)}};start=(new Date).getTime();n.open("POST","/Ai/Thumbnail?width="+e+"&height="+f);n.setRequestHeader("content-type",i);n.responseType="arraybuffer";n.send(t)}catch(o){showResult("ERROR",o.message,!1)}}function binaryToBase64(n){for(var i=new Uint8Array(n),t=i.length,r=new Array(t),u;t--;)r[t]=String.fromCharCode(i[t]);return u=r.join(""),btoa(u)}function updateResult(n,t){var u=n.status+" "+n.statusText,i="Invalid request, please ensure right input provided!",r=!1;n.status<299&&(i="Result returned in "+t.toString()+" ms from "+n.responseURL,r=!0);showResult(u,i,r)}function showResult(n,t,i){$("#result").show();statusPanel.className=i?"panel panel-success":"panel panel-danger";statusPanelHeading.innerHTML=n;statusPanelBody.innerHTML=t}var fromUrl=!0;$(document).ready(function(){$("input[name=imageSource]:radio").change(function(){this.value==="url"&&($("#fromUrlDiv").show(),$("#fromUploadDiv").hide(),fromUrl=!0);this.value=="upload"&&($("#fromUrlDiv").hide(),$("#fromUploadDiv").show(),fromUrl=!1)})});