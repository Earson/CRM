function getThumbnail(){var i=heightInput.value,r=widthInput.value,t=getImageInput(),u=t[0],f=t[1],n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4)try{if(end=(new Date).getTime(),n.status===200){urlInput.value="";heightInput.value="";widthInput.value="";var t=n.getResponseHeader("Content-Type"),i=binaryToBase64(n.response);$("#thumbnailImage").attr("src","data:"+t+";base64,"+i)}else $("#thumbnailImage").attr("src","");showRequestResult(n,end-start)}catch(r){showResult("ERROR",r.message,!1)}};start=(new Date).getTime();n.open("POST","/ComputerVision/Thumbnail?width="+r+"&height="+i);n.setRequestHeader("content-type",f);n.responseType="arraybuffer";n.send(u);$("#result").hide();$("#progress").show()}function getOcr(){var n=document.getElementById("textLanguage"),i=n.options[n.selectedIndex].value.toString(),t=getImageInput(),r=t[0],u=t[1],f={language:i};$.ajax({url:"/ComputerVision/Ocr?"+$.param(f),headers:{"Content-Type":u},type:"POST",data:r,processData:!1,contentType:!1,success:function(n){document.getElementById("textInImage").innerHTML=n.words},error:function(){document.getElementById("textInImage").innerHTML=""},complete:function(n){end=(new Date).getTime();showRequestResult(n,end-start)}});start=(new Date).getTime();$("#result").hide();$("#progress").show()}function analyze(){var n=getImageInput(),t=n[0],i=n[1];$.ajax({url:"/ComputerVision/Analyze",headers:{"Content-Type":i},type:"POST",data:t,processData:!1,contentType:!1,success:function(n){$("#anlyzeResult").show();document.getElementById("categoriesInImage").innerHTML=n.categories;document.getElementById("celebritiesInImage").innerHTML=n.detail;document.getElementById("imageTags").innerHTML=n.tags;document.getElementById("imageDescription").innerHTML=n.description;document.getElementById("isAdultContent").innerHTML=n.isAudltContent;document.getElementById("imageMetadata").innerHTML=n.metadata;document.getElementById("imageColors").innerHTML=n.color},error:function(){$("#anlyzeResult").hide()},complete:function(n){end=(new Date).getTime();showRequestResult(n,end-start)}});start=(new Date).getTime();$("#result").hide();$("#progress").show()}function startBot(){$.ajax({url:"/Bot/EmbedUrl",type:"GET",success:function(n){$("#chat2Bot").show();$("#bot").attr("src",n.url)}})}function getImageInput(){if(fromUrl){var n=urlInput.value.toString(),t={url:n};payloadData=JSON.stringify(t);contentType="application/json"}else payloadData=imageUpload.files[0],contentType="application/octet-stream";return[payloadData,contentType]}function binary2String2(n){return String.fromCharCode.apply(null,new Uint8Array(n))}function binary2String(n){for(var i=new Uint8Array(n),t=i.length,r=new Array(t);t--;)r[t]=String.fromCharCode(i[t]);return r.join("")}function binaryToBase64(n){var t=binary2String(n);return btoa(t)}function binaryToImageSrc(n,t){var i=new Blob([n],{type:t});return(window.URL||window.webkitURL).createObjectURL(i)}function showRequestResult(n,t){var i=n.status+" "+n.statusText;n.status<299?(msgBody="Successful result returned in "+t.toString()+" ms ",success=!0):(msgBody=n.response?binary2String(n.response):n.responseText,success=!1);showResult(i,msgBody,success)}function showResult(n,t,i){$("#progress").hide();$("#result").show();statusPanel.className=i?"panel panel-success":"panel panel-danger";statusPanelHeading.innerHTML=n;statusPanelBody.innerHTML=t}var fromUrl=!0;$(document).ready(function(){$("input[name=imageSource]:radio").change(function(){this.value==="url"&&($("#fromUrlDiv").show(),$("#fromUploadDiv").hide(),fromUrl=!0);this.value==="upload"&&($("#fromUrlDiv").hide(),$("#fromUploadDiv").show(),fromUrl=!1)})});